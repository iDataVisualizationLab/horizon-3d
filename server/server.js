var express = require('express');
var app = express();

app.post('/', function (req, res) {
    debugger;
    res.send('Hello World!')
});

app.get('/', function (req, res) {

    var buf = new Buffer([
        0x47, 0x49, 0x46, 0x38, 0x39, 0x61, 0x01, 0x00, 0x01, 0x00,
        0x80, 0x00, 0x00, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x2c,
        0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x02,
        0x02, 0x44, 0x01, 0x00, 0x3b]);

    // var EMPTY_GIF[] = {
    //     0x47, 0x49, 0x46, 0x38, 0x39, 0x61, 0x01, 0x00, 0x01, 0x00, 0x80, 0x00,
    //     0x00, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x2c, 0x00, 0x00, 0x00, 0x00,
    //     0x01, 0x00, 0x01, 0x00, 0x00, 0x02, 0x02, 0x44, 0x01, 0x00, 0x3b
    // };

    res.writeHead(200, {'Content-Type': 'image/gif' });
    res.end(buf, 'binary');
    // res.send(buf, { 'Content-Type': 'image/gif' }, 200);

    for(var queryKey in req.query) {
        if (!req.query.hasOwnProperty(queryKey)) {
            continue;
        }

        console.log("Query: " + queryKey + "=" + req.query[queryKey]);
    }
});


app.listen(3000, function () {
    console.log('Example app listening on port 3000!')
});